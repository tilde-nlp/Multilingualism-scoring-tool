<!DOCTYPE html>
<html lang="en" data-adreal-did="1620292041587186"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.80.0">
    <title>Multilingualism tool</title>


    

    <!-- Bootstrap core CSS -->
<!-- <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

<meta name="theme-color" content="#563d7c">

<style>
    #start-crawling {
      background-color: #1e7e34;
      border: 1px solid #1e7e34;
    }

    .stop-crawl, .stop-crawl:hover {
      background-color: #A41E43;
      border: 1px solid #A41E43;
      display: none;
    }

    .stop-crawl.stopping, .stop-crawl.stopping:hover {
      background-color: #007bff;
      border: 1px solid #007bff;
    }

    .table thead th {
      position: relative;
    }

    .crawling-data__wrapper .strong {
      font-weight: 600;
    }

    .status-alert {
      display: none;
      margin-right: 0.5rem;
    }

    .status-alert img {
      height: 32px;
    }

    .crawling-stats {
      display: none;
    }

    .error-alert {
      display: none;
    }

    .download_results_wrapper {
      display: none;
    }

    .inline-logo {
      height: 30px;
    }



    .upload-area{
        width: 100%;
        height: 100px;
        border: 2px solid lightgray;
        border-radius: 3px;
        margin: 0 auto;
        /* margin-top: 100px; */
        text-align: center;
        overflow: auto;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .upload-area:hover{
        cursor: pointer;
        /* border: 2px dotted lightgray; */
    }

    .upload-area h1{
        text-align: center;
        font-weight: normal;
        font-family: sans-serif;
        line-height: 29px;
        color: darkslategray;
        font-size: 1.5rem;
    }

    #input_file{
        display: none;
    }

    /* Thumbnail */
    .thumbnail{
        width: 80px;
        height: 80px;
        padding: 2px;
        border: 2px solid lightgray;
        border-radius: 3px;
        float: left;
    }

    .size{
        font-size:12px;
    }
    .clear-button {
      display: none;
      position: absolute;
      top: 5px;
      right: 5px;
      border: none;
      border-radius: 50%;
      width: 25px;
    }

    .clear-button:hover {
      background-color: #A41E43;
      color: #fff;
    }

    .or {
      display: flex;
      justify-content: center;
      margin-bottom: 0.3rem;
    }

    .job-error {
      display: none;
      color: red;
      font-style: italic;
    }

    .current-crawl-title {
      display: flex;
    align-items: center;
    }

    #crawling-form {
      display: none;
    }

    .help-anchor {
      background-color: #d5d5d5;
      border-radius: 50%;
      width: 17px;
      display: inline-block;
      color: #fff;
      display: inline-flex;
      justify-content: center;
      font-size: 0.7rem;
      margin-left: 0.2rem;
      position: absolute;
      top: 9px;
      right: 5px;
    }

    .help-anchor:hover {
      color: #fff;
      background-color: grey;
    }

    #help {
      font-size: 0.8rem;
      display: none;
    }

    .term{
      margin-bottom: 0.1rem;
    }

    .term .name{
      font-weight: 700;
    }

    .term .description:before{
      content: "-";
      width: 10px;
      display: inline-block;
    }

    .help-line {
      width: 100px;
      text-align: left;
      display: inline-block;
      margin-bottom: 0.5rem;
    }
</style>

</head>
  <body class="bg-light">
    
<div class="container">
  <div class="pt-4 pb-4 text-center">
    <img class="d-block mx-auto mb-3" src="/images/elrc.png" alt="" width="100" height="100">
    <h2>Multilingualism Scoring Tool</h2>
    <small>This tool crawls web sites and performs analysis and </br></small>
    <small>calculates scores based on their multilingualism. </small>
  </div>

  <div class="row crawling-data">

    <div class="col-md-10 offset-1">
      <!-- <div class="alert alert-secondary justify-content-between align-items-center status-alert" role="alert">
        <img src="/images/loader.gif" alt="">
        Crawling is ongoing. Average score <span class="average_score"></span>
      </div> -->

      <!-- <div class="alert alert-secondary justify-content-between align-items-center done-alert" role="alert">
        Crawling finished.
       </div> -->

       <div class="alert alert-secondary justify-content-between align-items-center error-alert" role="alert"></div>


      <form id="crawling-form" class="needs-validation" novalidate="">
        <h4 class="mb-3">Crawling data</h4>
        <div class="row">
          <div class="col-md-12 mb-1">
            
            <div class="form-group mb-1">
              <label for="exampleFormControlTextarea1" data-toggle="tooltip" title="Urls used as seed list for crawling. Use one URL per line. Multiple starting adrresses for a domain allowed. Please specify URL scheme (http:// or https://). Subdomains will be crawled as belonging to the same domain.">Urls (each in new line):</label>
              <textarea class="form-control" id="urlsToCrawl" rows="5"></textarea>
            </div>
            <span class="or">OR</span>  
            <div class="form-group">
              <!-- <label for="text-file">Upload text file:</label> -->
              <input type="file" id="input_file">

                    <!-- Drag and Drop container-->
                  <div class="upload-area"  id="uploadfile" data-toggle="tooltip" title="Please provide txt file with URLs. Use one URL per line. Multiple starting adrresses for a domain allowed. Please specify URL scheme (http:// or https://). Subdomains will be crawled as belonging to the same domain.">
                    <button class="clear-button">X</button>
                    <h1>Drag and Drop file here<br/>or<br/>Click to select file</h1>
                </div>
            </div>
            </div>
        </div>


        <div class="row">
          <div class="col-md-3 mb-3">
            <label for="zip" data-toggle="tooltip" title="Recommended value is 3, shallower crawl may not give accurate result, while deeper crawl will take longer to finish.">Crawling depth:</label>
            <input type="number" value="1" class="form-control" min="0" max="999" id="hops" placeholder="0" required="">
          </div>
          <div class="col-md-9 mb-3">
            <label for="zip" data-toggle="tooltip" title="Specify job name. This name will be used for file download. Only letters and numbers allowed, no spaces.">Job name:</label> <span class="job-error">Please fill in job name correctly!</span>
            <input type="text" class="form-control" id="titleOfJob" placeholder="" required="">
            <small>Alphanumeric symbols only</small>
          </div>
        </div>



        
        <hr>
      </form>
      <button class="btn btn-primary btn-lg" id="start-crawling" type="submit">Start crawling</button>
      <button class="btn btn-primary btn-lg stop-crawl" type="submit">Stop crawling</button>
    </div>
  </div>

  <div class="col-md-10 offset-1 mt-1" id="latest_results_wrapper">
    <a href="#" id="latest_results">Get latest results</a>
</div>

  <div class="row crawling-stats">
    <div class="col-md-10 offset-1">
      <h4 class="mb-3 mt-5 current-crawl-title">
        <span class="status-alert">
          <img src="/images/loader.gif" alt="">
        </span>
        Current crawl results 
      </h4>
      <h5>Average score: <span class="ml-1 average_score"></span></h5>

      <table class="table table-sm crawling-data">
        <thead>
          <tr>
            <th scope="col" data-toggle="tooltip" title="Domains detected from seed URL">Url <a href="#help" class="help-anchor">?</a></th>
            <th scope="col" data-toggle="tooltip" title="How many of EU24 plus Icelandic and Norwegian languages are represented in this website.">Coverage EU24+is,no<a href="#help" class="help-anchor">?</a></th>
            <th scope="col" data-toggle="tooltip" title="Language balance * coverage. Range from 0 (No content in any of EU24 languages) to 100 (Equal amount of text in all EU24 languages).">Normalised Language balance (Score)<a href="#help" class="help-anchor">?</a></th>
            <th scope="col" data-toggle="tooltip" title="Lieberson's diversity index calculated using HTML pages as unit.">LDI pages<a href="#help" class="help-anchor">?</a></th>
            <th scope="col" data-toggle="tooltip" title="Lieberson's diversity index calculated using words as unit.">LDI words<a href="#help" class="help-anchor">?</a></th>
            <th scope="col" data-toggle="tooltip" title="Calculate Share(n) as share of each language against largest; Number of languages found in a website as N. Language balance is then = sum(Share1, Share2, …, ShareN)/N. Maximum is 100 if amount of content in all languages present is equal.">Language balance<a href="#help" class="help-anchor">?</a></th>
            <th scope="col" data-toggle="tooltip" title="Language balance = sum(Share1, Share2, …, ShareN)/N , whre Share(n) as share of each language against largest. In this case Language balance is calculated using only EU24 languages.">Language balance EU24<a href="#help" class="help-anchor">?</a></th>
            <th scope="col" data-toggle="tooltip" title="Language balance = sum(Share1, Share2, …, ShareN)/N , whre Share(n) as share of each language against largest. In this case Language balance is calculated using EU24 plus Icelandic and Norwegian languages.">Language balance EU24+is,no<a href="#help" class="help-anchor">?</a></th>
            <!-- <th scope="col" data-toggle="tooltip" title="How many of EU24 languages are represented in this website.">Coverage EU24</th> -->
            <!-- <th scope="col" data-toggle="tooltip" title="How many of EU24 plus Icelandic and Norwegian languages are represented in this website.">Coverage EU24+is,no</th> -->
            <!-- <th scope="col">Language count</th> -->
            <!-- <th scope="col">Languages</th> -->
            <!-- <th scope="col">Words per language</th> -->
            <!-- <th scope="col">Total pages</th> -->
            <!-- <th scope="col">Total words</th> -->
            <!-- <th scope="col">Pages w/o language</th> -->
            <!-- <th scope="col">Words in pages w/o language</th> -->
          </tr>
        </thead>
        <tbody>
          
        </tbody>
        <tfoot>
          <tr>
            <th colspan="8">
              
            </th>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

 <div class="row">
    <div class="col-md-10 offset-1 download_results_wrapper">
        <a href="score?q=download_results">Download results</a>
    </div>
    <div class="col-md-10 offset-1 download_results_wrapper">
      <a href="score?q=download_detailed_results">Download detailed results</a>
    </div>
</div> 

<div id="help" class="mt-5 download_results_wrapper">
  <div class="row">
    <div class="col-md-10 offset-1">
      <hr class="help-line">
  
  <div class="term">
    <p><b>About Multilingualism Scoring Tool</b></p>
    <span>The Multilingualism Scoring Tool analyses web sites based on the contents of their web pages. The tool crawls each site page by page, extracts its contents, detects the language of each page and other relevant data. Lastly, it creates some statistics and calculates multilingualism scores based on the data and statistics obtained. </span>
  </div>
  <div class="term">
    <span class="name">Language selection</span>
    <span class="description">The tool uses ISO 639-1 codes for language identification and export to csv. Tool is designed to weigh languages as belonging to one of 3 lists: primary languages (by default those are 24 EU official languages), secondary languages (by default those are Icelandic and Norwegian) and other. Default values may be changed by editing configuration file "report_settings.ini". Language groups are considered when calculating normalised language balance – the final score, as well as Language balance EU24, Language balance EU24+is and no languages, coverage EU24 and other metrics. </span>
  </div>
  <div class="term">
    <span class="name">EU24 languages</span>
    <span class="description">Bulgarian, Croatian, Czech, Danish, Dutch, English, Estonian, Finnish, French, German, Greek, Hungarian, Irish, Italian, Latvian, Lithuanian, Maltese, Polish, Portuguese, Romanian, Slovak, Slovenian, Spanish, Swedish. ISO 639-1 codes are used for export to CSV.</span>
  </div>
  <div class="term">
    <span class="name">Url</span>
    <span class="description">Domains detected from seed URLs. Detection of domains is performed by splitting each URL into parts and using domain parts together with top-level domain suffix to construct a common "domain name". This way both "de.example.com" and "fr.example.com" are assigned to the same domain "example.com". On the other hand, using this approach "example.de" and "example.fr" are evaluated as two separate websites.</span>
  </div>
  <div class="term">
    <span class="name">Lieberson’s diversity index</span>
    <span class="description">A widely used index of linguistic diversity is Lieberson’s diversity index (LDI) (Lieberson 1981). It is defined as: <img class="mx-auto" src="/images/LDI.png" alt="" width="100" height="30"> where P<sub>i</sub> represents the share of i-th language speakers in a community. LDI is 0 if community speaks one language , while higher LDI means larger linguistic diversity. As implemented in the tool, LDI represents how content is distributed in various languages and how many languages are present on a site. When content is in one dominant language, LDI is 0, and as count of documents in various languages increases, LDI approaches 1 (or 100%, as displayed by tool). We calculate LDI both on per-page (in this case P<sub>i</sub> represents share of pages in i-th language) and per-word (in this case P<sub>i</sub> represents share of words in i-th language) basis to detect situation when text in dominant language is long, while in other languages text may be shorter (e.g., only summaries).</span>
  </div>
  <div class="term">
    <span class="name">LDI pages</span>
    <span class="description">Lieberson's diversity index calculated using HTML pages as unit. <img class="mx-auto" src="/images/LDI.png" alt="" width="100" height="30"> where P<sub>i</sub> represents share of pages in i-th language</span>
  </div>
  <div class="term">
    <span class="name">LDI words</span>
    <span class="description">Lieberson's diversity index calculated using words as unit. <img class="mx-auto" src="/images/LDI.png" alt="" width="100" height="30"> where P<sub>i</sub> represents share of words in i-th language</span>
  </div>
  <div class="term">
    <span class="name">Language balance</span>
    <span class="description">Calculate Share(n) as share of each language against largest; Number of languages found in a website as N. Language balance is then = sum(Share1, Share2, …, ShareN)/N. Maximum is 100 if amount of content in all languages present is equal.</span>
  </div>
  <div class="term">
    <span class="name">Language balance EU24</span>
    <span class="description">Language balance, calculated using only EU24 languages. Other languages present on a website are ignored when calculating this score.</span>
  </div>
  <div class="term">
    <span class="name">Language balance EU24+is,no</span>
    <span class="description">Language balance, calculated using EU24 plus Icelandic and Norwegian languages. Other languages present on a website are ignored when calculating this score.</span>
  </div>
  <div class="term">
    <span class="name">Normalised Language balance (Score)</span>
    <span class="description">Language balance * coverage. Range from 0 (No content in any of EU24 languages) to 100 (Equal amount of text in all EU24 languages).</span>
  </div>
  <div class="term">
    <span class="name">Coverage EU24</span>
    <span class="description">How many of EU24 languages are represented in this website.</span>
  </div>
  <div class="term">
    <span class="name">Coverage EU24+is,no</span>
    <span class="description">How many of EU24 plus Icelandic and Norwegian languages are represented in this website.</span>
  </div>
</div>
</div>
</div>

  <footer class="py-5 text-muted text-center text-small">
    <p class="mb-1">© 2021 Tilde <img class="inline-logo" src="https://tilde.com/themes/custom/drupal8_zymphonies_theme/logo.svg" alt=""> </p>
    <!-- <ul class="list-inline">
      <li class="list-inline-item"><a href="#">Privacy</a></li>
      <li class="list-inline-item"><a href="#">Terms</a></li>
      <li class="list-inline-item"><a href="#">Support</a></li>
    </ul> -->
  </footer>
</div>


<script
src="https://code.jquery.com/jquery-3.6.0.min.js"
integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="/docs/4.6/assets/js/vendor/jquery.min.js"><\/script>')</script>
      <!-- <script src="bootstrap/js/bootstrap.bundle.min.js"></script> -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

      <script>
              $(document).ready(function() {
                var handle = 0;
                var crawling_in_progress = 0;
                //var serverUrl = "http://127.0.0.127:8989";
                var serverUrl = "";
                var averageScore = -1;
                var urlsToScore = -1;

                 // preventing page from redirecting
                $("html").on("dragover", function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    $("h1").text("Drag here");
                });

                $("html").on("drop", function(e) { e.preventDefault(); e.stopPropagation(); });

                  var get_crawl_progress_status = function(){
                    const url = serverUrl + "/score?q=get_crawl_progress_status";
                      $.ajax({
                            type: "POST",
                            url: url,
                            // data: {urls: urlsToCrawl, hops: hops},
                            success: ((res)=>{
                              res = JSON.parse(res);
                              if (res.status === "error") {
                                clearInterval(handle); 
                                handle = 0;
                                crawling_in_progress = 0;
                                $(".status-alert").hide();
                                $(".done-alert").hide();
                                $(".error-alert").html(res.message);
                                $(".error-alert").show();
                                $("#crawling-form :input").prop("disabled", false);
                                $("#crawling-form").slideDown();
                                $(".stop-crawl").hide();
                                $("#start-crawling").show();

                                $(".upload-area").prop("draggable", true);
                              } else if(res.status === "ready") {
                                  // crawling finished
                                  clearInterval(handle); 
                                  handle = 0;
                                  $(".status-alert").hide();
                                  $(".done-alert").hide();
                                  $(".error-alert").hide();
                                  crawling_in_progress = 0;
                                  $("#crawling-form :input").prop("disabled", false);
                                  $("#crawling-form").slideDown();
                                  $(".stop-crawl").hide();
                                  $("#start-crawling").show();
                                  $(".upload-area").prop("draggable", true);
                              } else if(res.status === "stopping") {
                                  $(".status-alert").show();
                                  $(".done-alert").hide();
                                  $(".error-alert").hide();
                                  crawling_in_progress = 1;
                                  $("#crawling-form :input").prop("disabled", true);
                                  $("#crawling-form").slideUp();
                                  $(".stop-crawl").show().text("Stopping...").prop("disabled", true);
                                  $("#start-crawling").hide();

                                  $(".upload-area").prop("draggable", false);
                                  // clearInterval(handle); 
                                  // handle = 0;
                                  refresh_stats();
                                  if(handle === 0) {
                                    startInterval();
                                  }
                              } else {
                                // crawling
                                crawling_in_progress = 1;
                                $("#crawling-form :input").prop("disabled", true);
                                $("#crawling-form").slideUp();
                                $(".stop-crawl").show().text("Stop crawling").prop("disabled", false).removeClass("stopping");
                                $("#start-crawling").hide();
                                $(".upload-area").prop("draggable", false);
                                $(".status-alert").show();
                                $(".done-alert").hide();
                                $(".error-alert").hide();
                                refresh_stats();
                                if(handle === 0) {
                                  startInterval();
                                }
                              }
                            })
                      });
                  };

                  var refresh_stats = function(){ 
                    const url = serverUrl + "/score?q=get_current_scores";

                      $.ajax({
                            type: "POST",
                            url: url,
                            success: ((res)=>{
                              res = JSON.parse(res);
                              if(res.status !== "error") {
                                let resultPages = [];
                                for (const [key, value] of Object.entries(res)) {
                                  const tempPage = [key, ...res[key]];
                                  resultPages.push(tempPage);
                                }
                                console.log('intermediate results: ', resultPages);
                                // create table and show stats
                                let dataTable = "";
                                averageScore = 0;
                                urlsToScore = 0;

                                resultPages.forEach((dataRow)=>{
                                  if (dataRow[1] !== "0.00") {
                                    averageScore = averageScore + parseFloat(dataRow[1]);
                                    urlsToScore = urlsToScore + 1;
                                  }

                                  let langs = [];
                                  let langOutput = "";
                                  for (const [key, value] of Object.entries(dataRow[2].langs)) {
                                    const tempLang = [key, value];
                                    langs.push(tempLang);
                                  }

                                  if (langs.length > 2) {
                                    langOutput = dataRow[2].covered_extended;
                                  } else {
                                    langs = langs.map(elem => {
                                      return elem[0];
                                    
                                    });
                                    langOutput = langs.join(", ");
                                  }
                                  
                                  let tablerow = "<tr>";
                                  tablerow += "<th scope='row'>"+dataRow[0]+"</th>";
                                  tablerow += "<td>"+langOutput+"</td>";
                                  tablerow += "<td>"+dataRow[1]+"</td>";
                                  tablerow += "<td>"+dataRow[2].LDI_pages+"</td>";
                                  tablerow += "<td>"+dataRow[2].LDI_words+"</td>";
                                  tablerow += "<td>"+dataRow[2].language_balance+"</td>";
                                  tablerow += "<td>"+dataRow[2].language_balance_primary+"</td>";
                                  tablerow += "<td>"+dataRow[2].language_balance_extended+"</td>";
                                  
                                  // tablerow += "<td>"+dataRow[2].coverage_primary+"</td>";
                                  // tablerow += "<td>"+dataRow[2].coverage_extended+"</td>";
                                  // tablerow += "<td>"+dataRow[2].lang_count+"</td>";
                                  // tablerow += "<td>";
                                  //   for (const [key, value] of Object.entries(dataRow[2].langs)) {
                                  //     tablerow += "<span>"+key+":</span> <span>"+value+"</span><br>";
                                  //   }
                                  //   tablerow += "</td>";
                                  //   tablerow += "<td>"
                                  //     // if (dataRow[2].langs_words) {
                                  //       for (const [key, value] of Object.entries(dataRow[2].langs_words)) {
                                  //     tablerow += "<span>"+key+":</span> <span>"+value+"</span><br>";
                                  //   }
                                  //     // }
                                  //     tablerow += "</td>";
                                  //   tablerow += "<td>"+dataRow[2].total_pages+"</td>";
                                  //   tablerow += "<td>"+dataRow[2].total_words+"</td>";
                                  //   tablerow += "<td>"+dataRow[2].wo_lang_pages+"</td>";
                                  //   tablerow += "<td>"+dataRow[2].wo_lang_words+"</td>";
                                  tablerow += "</tr>";

                                  dataTable += tablerow;
                                });

                                $(".crawling-data tbody").html("");

                                $(".crawling-data tbody").append(dataTable);

                                // get_crawl_progress_status();
                                let totalAverage = 0.00;
                                if (urlsToScore !== 0) {
                                  totalAverage = Math.round(averageScore / urlsToScore * 100) / 100;
                                }
                                $(".average_score").html(totalAverage);
                                $(".crawling-stats").show();
                                $(".download_results_wrapper").show();
                              } else {
                                // scoring tool not running
                                $(".crawling-stats").hide();
                                $(".download_results_wrapper").hide();
                              }
                            })
                          });
                  }


                  var startInterval = function(){
                    handle = setInterval(function(){ 
                      get_crawl_progress_status();
                    }, 5000);
                  }

                  get_crawl_progress_status();
                  if(handle === 0) {
                      startInterval();
                  }

                    $("#start-crawling").on("click", ((event)=>{
                      event.preventDefault();

                      const url = serverUrl + "/score?q=start_crawl";
                      const urlsToCrawl = $("#urlsToCrawl").val();
                      const hops = $("#hops").val();
                      const titleOfJob = $("#titleOfJob").val(); 
                      const inputFile = $("#input_file")[0].files[0];

                      var fd = new FormData();
                      fd.append('input_file', inputFile); //, $("#input_file").val());
                      fd.append('urls', urlsToCrawl);
                      fd.append('hops', hops);
                      fd.append('titleOfJob', titleOfJob);

                      if (titleOfJob !== "") {
                        $("#crawling-form :input").prop("disabled", true);
                        $("#crawling-form").slideUp();
                        $(".stop-crawl").show().text("Stop crawling").prop("disabled", false).removeClass("stopping");
                        $("#start-crawling").hide();
                        $(".upload-area").prop("draggable", false);

                        $(".job-error").hide();
                        $("#titleOfJob").css("border", "1px solid #ced4da");

                        $.ajax({
                              method: "POST",
                              url: url,
                              data: fd, //{urls: urlsToCrawl, hops: hops, titleOfJob:titleOfJob, input_file: inputFile},
                              timeout: 0,
                              processData: false,
                              mimeType: "multipart/form-data",
                              contentType: false,
                              success: ((res)=>{
                                get_crawl_progress_status();
                                if(handle === 0) {
                                  startInterval();
                                }
                              })
                            });
                      } else {
                                $(".job-error").show();
                                $("#titleOfJob").css("border", "1px solid red");
                      }


                    }));

                    $(".stop-crawl").on("click", ((event)=>{
                      event.preventDefault();
                      $(".stop-crawl").text("Stopping...").prop("disabled", true).addClass("stopping");
                      const url = serverUrl + "/score?q=stop_crawl";
                      $.ajax({
                              type: "POST",
                              url: url,
                              success: ((res)=>{
                                // get_crawl_progress_status();
                              })
                            });

                    }));


                    // $(".refresh-stats").on("click", ((event)=>{
                    //   event.preventDefault();
                    //   refresh_stats();

                    // }));

                    $("#latest_results").on("click", ((event)=>{
                      event.preventDefault();
                      refresh_stats();

                    }));

                    //latest_results






                    // Drag enter
                    $('.upload-area').on('dragenter', function (e) {
                        e.stopPropagation();
                        e.preventDefault();
                        $("h1").text("Drop");
                    });

                    // Drag over
                    $('.upload-area').on('dragover', function (e) {
                        e.stopPropagation();
                        e.preventDefault();
                        $("h1").text("Drop file");
                    });

                    // Drop
                    $('.upload-area').on('drop', function (e) {
                        e.stopPropagation();
                        e.preventDefault();

                        $("#urlsToCrawl").prop("disabled", true);

                        var file = e.originalEvent.dataTransfer.files;
                        $("#input_file").prop("files", file);
                        $("h1").html("File <b>"+file[0].name+"</b> selected for uploading");
                        $(".clear-button").show();
                    });

                    $('.clear-button').on('click', function (e) { 
                      e.stopPropagation();
                        e.preventDefault();
                      $("#input_file").val('');
                      $(".clear-button").hide();
                      $("#urlsToCrawl").prop("disabled", false);
                      $("h1").html("Drag and Drop file here<br/>Or<br/>Click to select file");
                    });

                    // Open file selector on div click
                    $("#uploadfile").click(function(){
                        $("#input_file").click();
                    });

                    // file selected
                    $("#input_file").change(function(e){
                      $("#urlsToCrawl").prop("disabled", true);

                        var file = $("#input_file")[0].files[0];
                        $("h1").html("File <b>"+file.name+"</b> selected for uploading");
                        $(".clear-button").show();

                    });

                    $(".help-anchor").on('click', function (e) { 
                      e.stopPropagation();
                        e.preventDefault();
                     
                        document.querySelector("#help").scrollIntoView({
                            behavior: 'smooth'
                        });
                    });
              });

      </script>
        
  </body></html>